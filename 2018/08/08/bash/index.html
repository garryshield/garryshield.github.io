<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    
    <title>Bash | Garry Shield</title>

    <meta name="description" content="BASH 即 Bourne Again Shell 的缩写，基于 Bourne shell 并兼容它的大部分特性。 Shell 是命令解释器，通过 Shell 用户可以提供命令与系统交互、或者快速的执行批量的命令。它仅仅是用户和系统功能调用的中间层。 可以把 Shell 想像成用户和系统交流的一种方式。没有它系统可以照常工作，但是它为用户和系统资源之间提供了一个非常好的接口。通过 Shell 可以">
<meta name="keywords" content="Bash">
<meta property="og:type" content="article">
<meta property="og:title" content="Bash">
<meta property="og:url" content="http://garryshield.github.com/2018/08/08/bash/index.html">
<meta property="og:site_name" content="Garry Shield">
<meta property="og:description" content="BASH 即 Bourne Again Shell 的缩写，基于 Bourne shell 并兼容它的大部分特性。 Shell 是命令解释器，通过 Shell 用户可以提供命令与系统交互、或者快速的执行批量的命令。它仅仅是用户和系统功能调用的中间层。 可以把 Shell 想像成用户和系统交流的一种方式。没有它系统可以照常工作，但是它为用户和系统资源之间提供了一个非常好的接口。通过 Shell 可以">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://garryshield.github.com/2018/08/08/bash/assets/Snipaste_2018-08-11_03-33-51.png">
<meta property="og:updated_time" content="2018-08-08T09:36:09.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bash">
<meta name="twitter:description" content="BASH 即 Bourne Again Shell 的缩写，基于 Bourne shell 并兼容它的大部分特性。 Shell 是命令解释器，通过 Shell 用户可以提供命令与系统交互、或者快速的执行批量的命令。它仅仅是用户和系统功能调用的中间层。 可以把 Shell 想像成用户和系统交流的一种方式。没有它系统可以照常工作，但是它为用户和系统资源之间提供了一个非常好的接口。通过 Shell 可以">
<meta name="twitter:image" content="http://garryshield.github.com/2018/08/08/bash/assets/Snipaste_2018-08-11_03-33-51.png">

    <link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon.ico" />

    <link rel="stylesheet" href="/assets/css/libs.min.css">
    <link rel="stylesheet" href="/assets/libs/fontawesome/css/all.css">

    <link rel="stylesheet" href="/assets/css/main.min.css">
  </head>
  <body>
  
<header class="header mb-5">
<div class="container">
<div class="row justify-content-center">
  <div class="col-12 col-sm-12 col-md-12 col-lg-10 col-xl-10">

      <nav class="navbar navbar-expand-lg navbar-dark bg-transparent pl-0 pr-0">

    <a class="navbar-brand" href="/">Garry Shield</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/archives">Archives</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/categories">Categories</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/tags/">Tags</a>
        </li>              
        <li class="nav-item">
          <a class="nav-link" href="/about/">About</a>
        </li>              
        <li class="nav-item">
        </li>
      </ul>

      <form class="form-inline ml-lg-2 my-2 my-lg-0">
        <a class="btn btn-sm btn-light search" href="javascript:;">
          <i class="fas fa-search"></i>
        </a>
      </form>
    </div>

</nav>


      <div class="info info-post">
          <h1>Bash</h1>

          <p class="lead">Bash</p>

          
          <div class="post-tags">
          <dl class="tags">
              <dt>Tags:</dt>
              
                <dd><a href="/tags/#Bash">Bash</a></dd>
              
          </dl>
          </div>
          

          
          <div class="post-categories">
          <dl class="tags">
              <dt>Categories:</dt>
              
                <dd><a href="/categories/#Linux">Linux</a></dd>
              
          </dl>
          </div>
          

          <div class="post-date">
            By Garryshield, Created at 2018-08-08, Updated at 2018-08-08
          </div>
      </div>

  </div>
</div>
</div>
</header>

<div class="container">
<div class="row justify-content-center">
  <div class="col-12 col-sm-12 col-md-12 col-lg-7 col-xl-7">

      <article class="article mb-5">
        <section>
        <p><code>BASH</code> 即 <code>Bourne Again Shell</code> 的缩写，基于 <code>Bourne shell</code> 并兼容它的大部分特性。</p>
<p><code>Shell</code> 是命令解释器，通过 <code>Shell</code> 用户可以提供命令与系统交互、或者快速的执行批量的命令。它仅仅是用户和系统功能调用的中间层。</p>
<p>可以把 <code>Shell</code> 想像成用户和系统交流的一种方式。没有它系统可以照常工作，但是它为用户和系统资源之间提供了一个非常好的接口。通过 <code>Shell</code> 可以执行基本的数学运算、运行测试和执行应用，甚至通过操作整合和应用互连实现复杂的自运行任务。</p>
<p><code>BASH</code> 并不是操作系统，也不是窗口管理器，它通常运行的用户终端中。它不能控制鼠标和键盘、配置系统、激活屏幕保护或者双击打开文件。它通常也不会参与应用程序的启动。用户只是通过它在交互终端或者通过脚本执行一些用符合 BASH 语法的声明。</p>
<p><code>BASH</code> 可以以交互模式运行也可以通过执行执行脚本以非交互模式运行。通过脚本能够自动运行特定的逻辑，脚本本质是一些命令的列表，这些命令和在互模式命令行中输入的一样，只不过现在保存在文件里。当一个脚本执行时里面的命令就会逐行执行。</p>
<p>打开终端会看到提示符，提示符可以个性化设置，通常提示符会以 <code>$</code>、<code>%</code> 或者 <code>#</code> 结尾，它们表明当前具体是哪一种 <code>Shell</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<p><code>$</code>： 兼容 <code>Bourne shell</code> 的 <code>Shell</code>。如：<code>POSIX shell</code>，<code>Korn shell</code>，<code>Bash</code><br>
<code>%</code>： <code>C shell</code>（ <code>csh</code> 或者 <code>tcsh</code> ）<br>
<code>#</code>： 表示当前用户是 <code>root</code> 用户</p>
<p>通过 <code>man bash</code> 命令可以查看 <code>BASH</code> 使用帮助。</p>
<h2 id="1.-hello-world!">1. Hello World!</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Hello World!"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod +x ./hello_world.sh</span><br><span class="line">./hello_world.sh</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">/bin/bash hello_world.sh</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="2.-%E6%B3%A8%E9%87%8A">2. 注释</h2>
<p>以 <code>#</code> 开头的行就是注释，会被解释器忽略，bash 多行注释，只能每一行加一个 <code>#</code> 号。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#--------------------------------------------</span></span><br><span class="line"><span class="comment"># Script Description</span></span><br><span class="line"><span class="comment"># author：Garry Shield</span></span><br><span class="line"><span class="comment"># site：garryshield.github.io</span></span><br><span class="line"><span class="comment"># slogan：stay hungry stay foolish</span></span><br><span class="line"><span class="comment">#--------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##### Block A Start #####</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Block A Description</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">##### Block A End  #####</span></span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:&lt;&lt;EOF</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h2 id="3.-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F">3. 自定义变量</h2>
<p>在 Bash 中，每一个变量的值最终都是字符串，无论你给变量赋值时有没有使用引号，值都会以字符串的形式存储。</p>
<p>支持以下定义变量的方式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">variable=value</span><br><span class="line">variable=<span class="string">'value'</span></span><br><span class="line">variable=<span class="string">"value"</span></span><br><span class="line">variable=`<span class="built_in">command</span>`</span><br><span class="line">variable=$(<span class="built_in">command</span>)</span><br></pre></td></tr></table></figure>
<p>注：赋值号 <code>=</code> 两边不能有空格</p>
<p>变量的命名规范和大部分编程语言都一样：<br>
1、变量名由数字、字母、下划线组成；<br>
2、必须以字母或者下划线开头；<br>
3、不能使用 Shell 里的关键字；</p>
<p>变量定义示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串</span></span><br><span class="line">var_str1=string</span><br><span class="line">var_str2=<span class="string">'this is a string'</span></span><br><span class="line">var_str3=<span class="string">"this is another string"</span></span><br><span class="line">var_str4=<span class="string">"this is another <span class="variable">$&#123;string&#125;</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 整数</span></span><br><span class="line">var_int1=2</span><br><span class="line">var_int2=002</span><br><span class="line">var_int3=<span class="string">'2'</span></span><br><span class="line">var_int4=<span class="string">'002'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 浮点数</span></span><br><span class="line">var_float1=3.1425</span><br><span class="line">var_float2=<span class="string">'3.1425'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数组</span></span><br><span class="line">var_array1=(item0 item1 item2 <span class="string">"reset item"</span>)</span><br><span class="line">var_array2=(</span><br><span class="line">  item0</span><br><span class="line">  item1</span><br><span class="line">  item2</span><br><span class="line">  <span class="string">"reset item"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="3.1.-%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F">3.1. 使用变量</h4>
<p>使用一个定义过的变量，只要在变量名前面加美元符号 <code>$</code> 即可，如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">skill=<span class="string">"Java"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$skill</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;skill&#125;</span></span><br></pre></td></tr></table></figure>
<p>变量名外面的花括号 <code>{ }</code> 是可选的，如果解释器不能有效识别变量的边界，比如下面这种情况：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">skill=<span class="string">"Java"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;skill&#125;</span>Script</span><br></pre></td></tr></table></figure>
<p>如果没有 <code>{ }</code> 即 <code>echo $skillScript</code>，解释器就会把 <code>$skillScript</code> 当成一个变量而得到非预期的结果。</p>
<h4 id="3.2.-%E5%8D%95%E5%BC%95%E5%8F%B7">3.2. 单引号</h4>
<p>单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'\", \$, \`, \\, `whoami`, $&#123;PWD&#125;'</span> <span class="comment"># \", \$, \`, \\, `whoami`, $&#123;PWD&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="3.3.-%E5%8F%8C%E5%BC%95%E5%8F%B7">3.3. 双引号</h4>
<p>双引号里可以有变量，特殊字符（如：<code>$</code>、<code>`</code>、<code>/</code>）需要使用 <code>/</code> 转义。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"\", \$, \`, \\, `whoami`, <span class="variable">$&#123;PWD&#125;</span>"</span> <span class="comment"># ", $, `, \, root, /root/shell</span></span><br></pre></td></tr></table></figure>
<p>建议：如果变量的内容是数字，那么可以不加引号；如果真的需要原样输出就加单引号；其他没有特别要求的字符串等最好都加上双引号</p>
<h4 id="3.4.-%E5%B0%86%E5%91%BD%E4%BB%A4%E7%9A%84%E7%BB%93%E6%9E%9C%E8%B5%8B%E5%80%BC%E7%BB%99%E5%8F%98%E9%87%8F">3.4. 将命令的结果赋值给变量</h4>
<p><code>$( )</code> 和 <code>` `</code> 都是用来做命令替换用的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">version=`uname -r`</span><br><span class="line">version=$(uname -r)</span><br></pre></td></tr></table></figure>
<h4 id="3.5.-%E5%8F%AA%E8%AF%BB%E5%8F%98%E9%87%8F">3.5. 只读变量</h4>
<p>使用 <code>readonly</code> 命令可以将变量定义为只读变量，只读变量的值不能被改变，尝试修改会报错。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">myUrl=<span class="string">"https://garryshield.github.io/"</span></span><br><span class="line"><span class="built_in">readonly</span> myUrl</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="comment"># readonly myUrl="https://garryshield.github.io/"</span></span><br><span class="line"></span><br><span class="line">myUrl=<span class="string">"https://garryshield.github.com/"</span></span><br></pre></td></tr></table></figure>
<h4 id="3.6.-%E5%88%A0%E9%99%A4%E5%8F%98%E9%87%8F">3.6. 删除变量</h4>
<p>使用 <code>unset</code> 命令可以删除变量。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> variable_name</span><br></pre></td></tr></table></figure>
<h2 id="4.-%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F">4. 特殊变量</h2>
<p><code>$0</code>: 脚本本身<br>
<code>$1</code>: 第 1 个参数<br>
<code>$1 .. $9</code>: 前 9 个参数<br>
<code>$*</code>: 传递给脚本或函数的所有参数<br>
<code>$@</code>: 传递给脚本或函数的所有参数。被双引号 <code>&quot;</code> 包含时，与 <code>$*</code> 稍有不同<br>
<code>$#</code>: 传递给脚本或函数的参数个数。<br>
<code>$$</code>: 进程ID<br>
<code>$?</code>:	上个命令的退出状态，或函数的返回值</p>
<p>例如</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"脚本本身 \$0:"</span> <span class="variable">$0</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"参数个数 \$#:"</span> <span class="variable">$#</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"参数1 \$1:"</span> <span class="variable">$1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"参数2 \$2:"</span> <span class="variable">$2</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"所有参数 \$@:"</span> <span class="variable">$@</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"所有参数 \$*:"</span> $*</span><br></pre></td></tr></table></figure>
<p>执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost shell]<span class="comment"># ./variable.sh -f config.conf -v --prefix=/home</span></span><br><span class="line">脚本本身 <span class="variable">$0</span>: ./variable.sh</span><br><span class="line">参数个数 <span class="variable">$#</span>: 4</span><br><span class="line">参数1 <span class="variable">$1</span>: -f</span><br><span class="line">参数2 <span class="variable">$2</span>: config.conf</span><br><span class="line">所有参数 <span class="variable">$@</span>: -f config.conf -v --prefix=/home</span><br><span class="line">所有参数 $*: -f config.conf -v --prefix=/home</span><br></pre></td></tr></table></figure>
<h4 id="4.1.-%24*-%E5%92%8C-%24%40-%E7%9A%84%E5%8C%BA%E5%88%AB">4.1. <code>$*</code> 和 <code>$@</code> 的区别</h4>
<p><code>$*</code> 和 <code>$@</code> 都表示传递给函数或脚本的所有参数，不被双引号 <code>&quot;</code> 包含时，都以 <code>&quot;$1&quot; &quot;$2&quot; … &quot;$n&quot;</code> 的形式输出所有参数。但是当它们被双引号 <code>&quot;</code> 包含时，<code>&quot;$*&quot;</code> 会将所有的参数作为一个整体，以 <code>&quot;$1 $2 … $n&quot;</code> 的形式输出所有参数；<code>&quot;$@&quot;</code> 会将各个参数分开，以 <code>&quot;$1&quot; &quot;$2&quot; … &quot;$n&quot;</code> 的形式输出所有参数。</p>
<p>示例：</p>
<figure class="highlight bash"><figcaption><span>variable_05.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\$*="</span> $*</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\"\$*\"="</span> <span class="string">"$*"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\$@="</span> <span class="variable">$@</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\"\$@\"="</span> <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"循环 \$*"</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> $*</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$var</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"循环 \"\$*\""</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> <span class="string">"$*"</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$var</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"循环 \$@"</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$var</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"循环 \"\$@\""</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$var</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost shell]<span class="comment"># ./variable_05.sh -f config.conf -v --prefix=/home</span></span><br><span class="line">$*= -f config.conf -v --prefix=/home</span><br><span class="line"><span class="string">"$*"</span>= -f config.conf -v --prefix=/home</span><br><span class="line"></span><br><span class="line"><span class="variable">$@</span>= -f config.conf -v --prefix=/home</span><br><span class="line"><span class="string">"<span class="variable">$@</span>"</span>= -f config.conf -v --prefix=/home</span><br><span class="line"></span><br><span class="line">循环 $*</span><br><span class="line">-f</span><br><span class="line">config.conf</span><br><span class="line">-v</span><br><span class="line">--prefix=/home</span><br><span class="line"></span><br><span class="line">循环 <span class="string">"$*"</span></span><br><span class="line">-f config.conf -v --prefix=/home</span><br><span class="line"></span><br><span class="line">循环 <span class="variable">$@</span></span><br><span class="line">-f</span><br><span class="line">config.conf</span><br><span class="line">-v</span><br><span class="line">--prefix=/home</span><br><span class="line"></span><br><span class="line">循环 <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line">-f</span><br><span class="line">config.conf</span><br><span class="line">-v</span><br><span class="line">--prefix=/home</span><br></pre></td></tr></table></figure>
<h2 id="5.-%E5%8F%98%E9%87%8F%E6%89%A9%E5%B1%95">5. 变量扩展</h2>
<p>1、Use Default Values <strong>${parameter:-word}</strong><br>
如果 parameter 不存在返回 word。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"Your name is : <span class="variable">$&#123;myname:-garry&#125;</span>"</span></span><br></pre></td></tr></table></figure>
<p>2、Assign Default Values <strong>${parameter:=word}</strong><br>
如果 parameter 不存在返回 word，并设置为 parameter 的值。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"Your name is : <span class="variable">$&#123;myname:=garry&#125;</span>"</span></span><br></pre></td></tr></table></figure>
<p>3、Display Error if Null or Unset <strong>${parameter:?word}</strong><br>
如果 parameter 不存在报出 word 表示的错误。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"Your name is : <span class="variable">$&#123;myname:?'myname is undefined'&#125;</span>"</span></span><br></pre></td></tr></table></figure>
<p>4、Use Alternate Value <strong>${parameter:+word}</strong><br>
如果 parameter 存在返回 word，否则什么都不返回。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"Your name is : <span class="variable">$&#123;myname:+shield&#125;</span>"</span></span><br></pre></td></tr></table></figure>
<h2 id="6.-%E6%95%B0%E5%80%BC">6. 数值</h2>
<h4 id="6.1.-%E6%95%B4%E6%95%B0%E8%BF%90%E7%AE%97">6.1. 整数运算</h4>
<p><strong><code>$[ ]</code>、<code>$(( ))</code></strong><br>
它们是一样的，都是进行数学运算的。支持<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>、<code>%</code>、<code>++</code>、<code>--</code>：分别为 “加、减、乘、除、取模、自加、自减”。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">a=5</span><br><span class="line">b=3</span><br><span class="line"><span class="built_in">echo</span> $[a+b] <span class="comment"># 8 加</span></span><br><span class="line"><span class="built_in">echo</span> $[a-b] <span class="comment"># 2 减</span></span><br><span class="line"><span class="built_in">echo</span> $[a*b] <span class="comment"># 15 乘</span></span><br><span class="line"><span class="built_in">echo</span> $[a/b] <span class="comment"># 1 除取整</span></span><br><span class="line"><span class="built_in">echo</span> $[a%b] <span class="comment"># 2 除取余</span></span><br><span class="line"><span class="built_in">echo</span> $[a==b] <span class="comment"># 0 是否相等</span></span><br><span class="line"><span class="built_in">echo</span> $[a!=b] <span class="comment"># 1 是否不相等</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> $[a++] <span class="comment"># 5 后增</span></span><br><span class="line"><span class="built_in">echo</span> $[a--] <span class="comment"># 6 后减</span></span><br><span class="line"><span class="built_in">echo</span> $[++a] <span class="comment"># 6 前增</span></span><br><span class="line"><span class="built_in">echo</span> $[--a] <span class="comment"># 5 前减</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> $[a=b] <span class="comment"># 3 赋值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以直接使用数字的字面值</span></span><br><span class="line"><span class="built_in">echo</span> $[5+3] <span class="comment"># 8 加</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">a=5</span><br><span class="line">b=3</span><br><span class="line"><span class="built_in">echo</span> $((a+b)) <span class="comment"># 8 加</span></span><br><span class="line"><span class="built_in">echo</span> $((a-b)) <span class="comment"># 2 减</span></span><br><span class="line"><span class="built_in">echo</span> $((a*b)) <span class="comment"># 15 乘</span></span><br><span class="line"><span class="built_in">echo</span> $((a/b)) <span class="comment"># 1 除取整</span></span><br><span class="line"><span class="built_in">echo</span> $((a%b)) <span class="comment"># 2 除取余</span></span><br><span class="line"><span class="built_in">echo</span> $((a==b)) <span class="comment"># 0 是否相等</span></span><br><span class="line"><span class="built_in">echo</span> $((a!=b)) <span class="comment"># 1 是否不相等</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> $((a++)) <span class="comment"># 5 后增</span></span><br><span class="line"><span class="built_in">echo</span> $((a--)) <span class="comment"># 6 后减</span></span><br><span class="line"><span class="built_in">echo</span> $((++a)) <span class="comment"># 6 前增</span></span><br><span class="line"><span class="built_in">echo</span> $((--a)) <span class="comment"># 5 前减</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> $((a=b)) <span class="comment"># 3 赋值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以直接使用数字的字面值</span></span><br><span class="line"><span class="built_in">echo</span> $((5+3)) <span class="comment"># 8 加</span></span><br></pre></td></tr></table></figure>
<p><strong><code>expr</code></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a=5</span><br><span class="line">b=3</span><br><span class="line"><span class="built_in">echo</span> `expr <span class="variable">$a</span> + <span class="variable">$b</span>` <span class="comment"># 8 加</span></span><br><span class="line"><span class="built_in">echo</span> `expr <span class="variable">$a</span> - <span class="variable">$b</span>` <span class="comment"># 2 减</span></span><br><span class="line"><span class="built_in">echo</span> `expr <span class="variable">$a</span> \* <span class="variable">$b</span>` <span class="comment"># 15 乘</span></span><br><span class="line"><span class="built_in">echo</span> `expr <span class="variable">$a</span> / <span class="variable">$b</span>` <span class="comment"># 1 除取整</span></span><br><span class="line"><span class="built_in">echo</span> `expr <span class="variable">$a</span> % <span class="variable">$b</span>` <span class="comment"># 2 除取余</span></span><br><span class="line"><span class="built_in">echo</span> `expr <span class="variable">$a</span> == <span class="variable">$b</span>` <span class="comment"># 0 是否相等</span></span><br><span class="line"><span class="built_in">echo</span> `expr <span class="variable">$a</span> != <span class="variable">$b</span>` <span class="comment"># 1 是否不相等</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以直接使用数字的字面值</span></span><br><span class="line"><span class="built_in">echo</span> `expr 5 + 3` <span class="comment"># 8 加</span></span><br></pre></td></tr></table></figure>
<h4 id="6.1.-%E6%B5%AE%E7%82%B9%E6%95%B0%E8%BF%90%E7%AE%97">6.1. 浮点数运算</h4>
<h2 id="7.-%E5%AD%97%E7%AC%A6%E4%B8%B2">7. 字符串</h2>
<p>字符串可以用单引号 <code>'</code>，也可以用双引号 <code>&quot;</code>，也可以都不用。如果字符串中有空格则一定要加引号。</p>
<h4 id="7.1.-%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6">7.1. 字符串长度</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">"www.google.com"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#string&#125;</span> <span class="comment"># 输出 14</span></span><br><span class="line"><span class="built_in">echo</span> `expr length <span class="string">"<span class="variable">$&#123;string&#125;</span>"</span>` <span class="comment"># 输出 14</span></span><br><span class="line"><span class="built_in">echo</span> `expr <span class="string">"<span class="variable">$&#123;string&#125;</span>"</span> : <span class="string">".*"</span>` <span class="comment"># 输出 14</span></span><br></pre></td></tr></table></figure>
<h4 id="7.2.-%E6%88%AA%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2">7.2. 截取字符串</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">"www.google.com"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;string:4:6&#125;</span> <span class="comment"># 从第4个字符开始截取6个字符，输出 google</span></span><br><span class="line"><span class="built_in">echo</span> `expr substr <span class="string">"<span class="variable">$&#123;string&#125;</span>"</span> 5 6` <span class="comment"># google</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;string:4&#125;</span> <span class="comment"># 从第4个字符开始截取，输出 google.com</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;string: -3&#125;</span> <span class="comment"># 截取后3个字符 输出 com</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;string:(-3)&#125;</span> <span class="comment"># 同上</span></span><br></pre></td></tr></table></figure>
<h4 id="7.3.-indexof">7.3. indexOf</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">"www.google.com"</span></span><br><span class="line"><span class="built_in">echo</span> `expr index <span class="string">"<span class="variable">$&#123;string&#125;</span>"</span> g` <span class="comment"># 5</span></span><br></pre></td></tr></table></figure>
<h4 id="7.4.-%E6%9B%BF%E6%8D%A2">7.4. 替换</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">"www.google.com"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;string/g/b&#125;</span> <span class="comment"># 代替第一个匹配 输出 www.boogle.com</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;string//g/b&#125;</span> <span class="comment"># 代替所有匹配 输出 www.booble.com</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;string//google/baidu&#125;</span> <span class="comment"># 代替所有匹配 输出 www.baidu.com</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;string/#www/cloud&#125;</span> <span class="comment"># #表示以什么开头来匹配 输出 cloud.google.com</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;string/%com/com.hk&#125;</span> <span class="comment"># %表示以什么结尾来匹配 输出 www.google.com.hk</span></span><br></pre></td></tr></table></figure>
<h2 id="8.-%E6%95%B0%E7%BB%84">8. 数组</h2>
<p>bash 支持一维数组（不支持多维数组），并且没有限定数组的大小。<br>
数组元素的下标由 0 开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于 0。</p>
<h4 id="8.1.-%E5%AE%9A%E4%B9%89%E6%95%B0%E7%BB%84">8.1. 定义数组</h4>
<p>在 Shell 中，用括号来表示数组，数组元素用&quot;空格&quot;符号分割开。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array_name=(value0 value1 value2 value3)</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">array_name=(</span><br><span class="line">  value0</span><br><span class="line">  value1</span><br><span class="line">  value2</span><br><span class="line">  value3</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">files=(~/*)</span><br></pre></td></tr></table></figure>
<h4 id="8.2.-%E4%BF%AE%E6%94%B9%E5%85%83%E7%B4%A0">8.2. 修改元素</h4>
<p>可以不使用连续的下标，而且下标的范围没有限制。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array_name[0]=value0</span><br><span class="line">array_name[1]=value1</span><br><span class="line">array_name[100]=value100</span><br><span class="line">array_name[100+1]=value101</span><br><span class="line">array_name+=(value102)</span><br><span class="line"></span><br><span class="line"><span class="built_in">unset</span> <span class="string">"array_name[0]"</span></span><br></pre></td></tr></table></figure>
<h4 id="8.3.-%E8%8E%B7%E5%8F%96%E6%8C%87%E5%AE%9A%E5%80%BC">8.3. 获取指定值</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_name[100]&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_name[100+1]&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="8.4.-%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E9%94%AE">8.4. 获取所有键</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;!array_name[@]&#125;</span> <span class="comment"># 0 1 2 3 100 101</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重建索引</span></span><br><span class="line">array_name=(<span class="string">"<span class="variable">$&#123;array_name[@]&#125;</span>"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="8.5.-%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E5%80%BC">8.5. 获取所有值</h4>
<p>使用 <code>@</code> 符号可以获取数组中的所有元素</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_name[@]&#125;</span> <span class="comment"># value0 value1 value2 value3 value100 value101</span></span><br></pre></td></tr></table></figure>
<h4 id="8.6.-%E8%8E%B7%E5%8F%96%E9%95%BF%E5%BA%A6">8.6. 获取长度</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 取得数组元素的个数</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#array_name[@]&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#array_name[*]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取得数组单个元素的长度</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#array_name[100]&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="8.7.-%E9%81%8D%E5%8E%86%E6%95%B0%E7%BB%84">8.7. 遍历数组</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;array_name[@]&#125;</span>; <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"value:"</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>或者，推荐使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;!array_name[@]&#125;</span>"</span>; <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"key:"</span> <span class="variable">$i</span> <span class="string">"value:"</span> <span class="string">"<span class="variable">$&#123;array_name[$i]&#125;</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>或者，慎用此法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (( i=0; i&lt;<span class="variable">$&#123;#array_name[@]&#125;</span>; i++ )); <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"order:"</span> <span class="variable">$i</span> <span class="string">"value:"</span> <span class="variable">$&#123;array_name[$i]&#125;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<h4 id="8.8.-indexof">8.8. indexOf</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">search=<span class="string">"value2"</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;!array_name[@]&#125;</span>"</span>; <span class="keyword">do</span></span><br><span class="line">   <span class="keyword">if</span> [[ <span class="string">"<span class="variable">$&#123;array_name[$i]&#125;</span>"</span> = <span class="string">"<span class="variable">$&#123;search&#125;</span>"</span> ]]; <span class="keyword">then</span></span><br><span class="line">       <span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;i&#125;</span>"</span>;</span><br><span class="line">   <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment"># 2</span></span><br></pre></td></tr></table></figure>
<h2 id="9.-for-%E5%BE%AA%E7%8E%AF">9. For 循环</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &lt;item&gt; <span class="keyword">in</span> &lt;list&gt;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  &lt;commands&gt;</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..5&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"Welcome <span class="variable">$i</span> times"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 2 10)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"Welcome <span class="variable">$i</span> times"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Bash v4.0+ </span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;0..10..2&#125;</span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Welcome <span class="variable">$i</span> times"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (( c=1; c&lt;=5; c++ ))</span><br><span class="line"><span class="keyword">do</span>  </span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"Welcome <span class="variable">$c</span> times"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> /etc/*</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$&#123;file&#125;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>无限循环</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (( ; ; ))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"infinite loops [ hit CTRL+C to stop]"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<h2 id="10.-while-%E5%BE%AA%E7%8E%AF">10. While 循环</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> &lt;condition&gt;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  &lt;commands&gt;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">  &lt;commands&gt;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> &lt;line&gt;</span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">  &lt;commands&gt;</span><br><span class="line"><span class="keyword">done</span> &lt; &lt;file&gt;</span><br></pre></td></tr></table></figure>
<h2 id="11.-if-%2F-else-%E8%AF%AD%E5%8F%A5">11. If / Else 语句</h2>
<p><strong>If</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &lt;commands&gt; </span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  &lt;commands&gt;</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p><strong>If Else</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &lt;commands&gt;</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  &lt;commands&gt;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  &lt;other commands&gt;</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p><strong>If Elif Else</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &lt;commands&gt;</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  &lt;commands&gt;</span><br><span class="line"><span class="keyword">elif</span> &lt;commands&gt;</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  &lt;different commands&gt;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  &lt;other commands&gt;</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<h2 id="12.-case-%E8%AF%AD%E5%8F%A5">12. Case 语句</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> &lt;variable&gt; <span class="keyword">in</span></span><br><span class="line">  &lt;pattern a&gt;|&lt;pattern b&gt;|&lt;pattern c&gt;)</span><br><span class="line">    &lt;commands&gt;</span><br><span class="line">    ;;</span><br><span class="line">  &lt;other pattern&gt;)</span><br><span class="line">    &lt;commands&gt;</span><br><span class="line">    ;;</span><br><span class="line">  &lt;more pattern&gt;)</span><br><span class="line">    &lt;commands&gt;</span><br><span class="line">    ;;</span><br><span class="line">  *)</span><br><span class="line">    &lt;commands&gt;</span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<h2 id="13.-break%2C-continue">13. break, continue</h2>
<p><code>break</code> 命令允许跳出所有循环（终止执行后面的所有循环）。<br>
<code>break</code> 后面可以跟一个数字，如： <code>break 2</code>，表示跳出第几层循环。</p>
<p><code>continue</code> 命令与 <code>break</code> 命令类似，只有一点差别，它不会跳出所有循环，仅仅跳出当前循环。<br>
<code>continue</code> 后面也可以跟一个数字，如： <code>continue 2</code>，表示跳出第几层循环。</p>
<h2 id="14.-%E5%87%BD%E6%95%B0">14. 函数</h2>
<h4 id="14.1.-%E5%AE%9A%E4%B9%89">14.1. 定义</h4>
<p>Shell 函数的定义格式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="keyword">function</span> ] <span class="function"><span class="title">fun_name</span></span> () &#123;</span><br><span class="line">  list of commands</span><br><span class="line">  [ <span class="built_in">return</span> value ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="14.2.-%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0">14.2. 调用函数</h4>
<p>函数调用前必须先声明函数。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fun_name</span><br><span class="line">fun_name arg1 arg2</span><br><span class="line"></span><br><span class="line">result=$(fun_name)</span><br><span class="line">result=$(fun_name arg1 arg2)</span><br></pre></td></tr></table></figure>
<h4 id="14.3.-%E8%BF%94%E5%9B%9E%E5%80%BC">14.3. 返回值</h4>
<p>可以显式增加 <code>return</code> 语句，如果不加，会将最后一条命令运行结果作为返回值。返回值只能是整数（0－255），用来表示函数执行成功与否，0 表示成功，其他值表示失败。如果 <code>return</code> 其他数据，比如一个字符串，会得到错误提示。如果需要传出其它类型函数值，可以在函数调用之前，定义变量（这个就是全局变量）。在函数内部就可以直接修改，然后在执行函数就可以读出修改过的值。</p>
<p>注：<code>return</code> 是中止函数并返回，<code>exit</code> 是中止脚本并返回。</p>
<p>函数返回值，只能通过 <code>$?</code> 系统变量获得，</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">fun_name</span></span>() &#123;</span><br><span class="line">  <span class="comment"># ...</span></span><br><span class="line">  <span class="built_in">return</span> 100</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun_name</span><br><span class="line"><span class="built_in">echo</span> $? <span class="comment"># 100</span></span><br></pre></td></tr></table></figure>
<h4 id="14.4.-%E5%8F%82%E6%95%B0">14.4. 参数</h4>
<p>同执行脚本一样，调用函数时可以向其传递参数。在函数体内部，通过 <code>$n</code> 的形式来获取参数的值，例如，<code>$1</code> 表示第一个参数，<code>$2</code> 表示第二个参数...<br>
<code>$#</code> 表示参数个数，<code>$*</code>、<code>$@</code> 表示所有参数。</p>
<h4 id="14.5.-%E4%BD%9C%E7%94%A8%E5%9F%9F">14.5. 作用域</h4>
<p>脚本中的变量是全局的，函数体里都能访问。也可以在函数中通过 <code>local var_name=val_con</code> 定义局部变量，对局部变量的修改，不会影响函数外部相同变量的值。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">num=1</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">fun1</span></span>() &#123;</span><br><span class="line">  <span class="built_in">return</span> <span class="variable">$num</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">fun2</span></span>() &#123;</span><br><span class="line">  <span class="built_in">local</span> num=2</span><br><span class="line">  <span class="built_in">return</span> <span class="variable">$num</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">fun3</span></span>() &#123;</span><br><span class="line">  num=3</span><br><span class="line">  <span class="built_in">return</span> <span class="variable">$num</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$num</span> <span class="comment"># 1</span></span><br><span class="line"></span><br><span class="line">fun1</span><br><span class="line"><span class="built_in">echo</span> $? <span class="comment"># 1</span></span><br><span class="line"></span><br><span class="line">fun2</span><br><span class="line"><span class="built_in">echo</span> $? <span class="comment"># 2</span></span><br><span class="line"></span><br><span class="line">fun3</span><br><span class="line"><span class="built_in">echo</span> $? <span class="comment"># 3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$num</span> <span class="comment"># 3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="14.6.-%E5%88%A0%E9%99%A4%E5%87%BD%E6%95%B0">14.6. 删除函数</h4>
<p>和删除变量一样，删除函数也可以使用 <code>unset</code> 命令，不过要加上 <code>.f</code> 选项，如下所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> .f function_name</span><br></pre></td></tr></table></figure>
<h2 id="15.-%E9%87%8D%E5%AE%9A%E5%90%91">15. 重定向</h2>
<p>Unix/Linux 命令运行时都会打开三个文件：<br>
1、标准输入文件(stdin)：stdin的文件描述符为 0，Unix程序默认从stdin读取数据。<br>
2、标准输出文件(stdout)：stdout 的文件描述符为 1，Unix程序默认向stdout输出数据。<br>
3、标准错误文件(stderr)：stderr的文件描述符为 2，Unix程序会向stderr流中写入错误信息。<br>
默认情况下，command &gt; file 将 stdout 重定向到 file，command &lt; file 将 stdin 重定向到 file。</p>
<p>Unix/Linux 命令默认从标准输入设备(stdin)获取输入，将结果输出到标准输出设备(stdout)显示。一般情况下，标准输入设备就是键盘，标准输出设备就是终端，即显示器。</p>
<h4 id="15.1.-%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91">15.1. 输出重定向</h4>
<p>命令输出重定向的语法为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &gt; file</span><br></pre></td></tr></table></figure>
<p>表示输出到显示器的内容就可以被重定向到文件。<br>
使用 <code>&gt;</code> 输出重定向会覆盖文件内容，如果不希望文件内容被覆盖，可以使用 <code>&gt;&gt;</code> 表示追加到文件末尾。</p>
<h4 id="15.2.-%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91">15.2. 输入重定向</h4>
<p>和输出重定向一样，也可以从文件获取输入，语法为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &lt; file</span><br></pre></td></tr></table></figure>
<p>表示本来需要从键盘获取输入的命令会转移到文件读取内容。</p>
<h4 id="15.3.-%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91">15.3. 输入输出重定向</h4>
<p>如果希望对 stdin 和 stdout 都重定向，可以这样写：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &lt; file1 &gt; file2</span><br><span class="line"><span class="built_in">command</span> &lt; file1 &gt;&gt; file2</span><br></pre></td></tr></table></figure>
<h4 id="15.4.-stderr-%E9%87%8D%E5%AE%9A%E5%90%91">15.4. stderr 重定向</h4>
<p>如果希望 stderr 重定向到 file，可以这样写：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> 2 &gt; file</span><br><span class="line"><span class="built_in">command</span> 2 &gt;&gt; file</span><br></pre></td></tr></table></figure>
<h4 id="15.5.-%E5%90%88%E5%B9%B6-stdout-%E5%92%8C-stderr">15.5. 合并 stdout 和 stderr</h4>
<p>如果希望将 stdout 和 stderr 合并后重定向到 file，可以这样写：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &gt; file 2&gt;&amp;1</span><br><span class="line"><span class="built_in">command</span> &gt;&gt; file 2&gt;&amp;1</span><br></pre></td></tr></table></figure>
<h4 id="15.6.-here-document">15.6. Here Document</h4>
<p>Here Document 是 Shell 中的一种特殊的重定向方式，它的基本的形式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &lt;&lt; delimiter</span><br><span class="line">    document</span><br><span class="line">delimiter</span><br></pre></td></tr></table></figure>
<p>它的作用是将两个 delimiter 之间的内容作为输入传递给 command。</p>
<p>特别的如果不写 command 可以用做多行注释，如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;EOF</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>注意：<br>
1、开始的 delimiter 前后的空格会被忽略掉。<br>
2、结尾的 delimiter 一定要顶格写，前面不能有任何字符，后面也不能有任何字符。</p>
<p>例如：通过 <code>vi</code> 编辑器将多行内容保存到 test.txt 文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">filename=test.txt</span><br><span class="line">vi <span class="variable">$filename</span> &lt;&lt;EOF</span><br><span class="line">i</span><br><span class="line">This file was created automatically from</span><br><span class="line">a shell script</span><br><span class="line">^[</span><br><span class="line">ZZ</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h4 id="15.7.-%2Fdev%2Fnull-%E6%96%87%E4%BB%B6">15.7. /dev/null 文件</h4>
<p><code>/dev/null</code> 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。</p>
<p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 <code>/dev/null</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &gt; /dev/null</span><br></pre></td></tr></table></figure>
<p>如果希望屏蔽 stdout 和 stderr，可以这样写：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>
<h2 id="16.-exit">16. exit</h2>
<p><code>exit</code> 命令用于退出当前 shell。同时可以指定一个退出码（status）表明脚本执行的情况，如果不加退出码默认为最后一个命令的退出码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span> status</span><br></pre></td></tr></table></figure>
<p>常用退出码的约定：<br>
1、0 表示成功（Zero - Success）<br>
2、非 0 表示失败（Non-Zero  - Failure）<br>
3、2 表示用法不当（Incorrect Usage）<br>
4、127 表示命令没有找到（Command Not Found）<br>
5、126 表示不是可执行的（Not an executable）<br>
6、&gt;=128 信号产生</p>
<p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> $(dirname <span class="variable">$0</span>) || <span class="built_in">exit</span> 1</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$#</span>"</span> -ne <span class="string">"2"</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"usage: <span class="variable">$0</span> &lt;area&gt; &lt;hours&gt;"</span>  </span><br><span class="line">  <span class="built_in">exit</span> 2 </span><br><span class="line"><span class="keyword">if</span></span><br></pre></td></tr></table></figure>
<h2 id="17.-%E6%B5%8B%E8%AF%95%E5%92%8C%E6%AF%94%E8%BE%83">17. 测试和比较</h2>
<h4 id="17.1.-test%E3%80%81%5B">17.1. test、[</h4>
<p><code>test</code> 命令根据表达式 <code>expr</code> 求值的结果返回 0（真）或 1（假）。<br>
<code>test &lt;expr&gt;</code> 和 <code>[ &lt;expr&gt; ]</code> 是等价的，可以用 <code>$?</code> 检查返回值；可以使用 <code>&amp;&amp;</code> 和 <code>||</code> 操作返回值。<br>
注：<code>[ &lt;expr&gt; ]</code> 中的空格。<br>
示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="string">"<span class="variable">$variable</span>"</span> ] || <span class="built_in">echo</span> <span class="string">'variable is unset or empty!'</span> &gt;&amp;2</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span> 3 -gt 4 &amp;&amp; <span class="built_in">echo</span> True || <span class="built_in">echo</span> False <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line">[ <span class="string">"abc"</span> != <span class="string">"def"</span> ]; <span class="built_in">echo</span> $? <span class="comment"># 0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span> -d <span class="string">"<span class="variable">$HOME</span>"</span>; <span class="built_in">echo</span> $? <span class="comment"># 0</span></span><br><span class="line"></span><br><span class="line">! <span class="built_in">test</span> -d <span class="string">"<span class="variable">$HOME</span>"</span>; <span class="built_in">echo</span> $? <span class="comment"># 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -d <span class="string">"<span class="variable">$HOME</span>"</span>; <span class="keyword">then</span></span><br><span class="line">  <span class="comment">#...</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="comment">#...</span></span><br><span class="line"><span class="keyword">if</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">"<span class="variable">$HOME</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="comment">#...</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="comment">#...</span></span><br><span class="line"><span class="keyword">if</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="17.2.-%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95">17.2. 文件测试</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-e &lt;file&gt;	<span class="comment"># 文件（包括目录）是否存在</span></span><br><span class="line">-f &lt;file&gt;	<span class="comment"># 文件是否是普通文件（既不是目录，也不是设备文件）</span></span><br><span class="line">-d &lt;file&gt;	<span class="comment"># 文件是否是目录</span></span><br><span class="line">-c &lt;file&gt;	<span class="comment"># 文件是否是字符设备文件</span></span><br><span class="line">-b &lt;file&gt;	<span class="comment"># 文件是否是块设备文件</span></span><br><span class="line">-p &lt;file&gt;	<span class="comment"># 文件是否是管道文件</span></span><br><span class="line">-S &lt;file&gt;	<span class="comment"># 文件是否是套接字文件</span></span><br><span class="line">-h &lt;file&gt;	<span class="comment"># 文件是否是符号链接</span></span><br><span class="line">-g &lt;file&gt;	<span class="comment"># 文件是否设置了 SGID 位</span></span><br><span class="line">-u &lt;file&gt;	<span class="comment"># 文件是否设置了 SUID 位</span></span><br><span class="line">-r &lt;file&gt;	<span class="comment"># 文件是否可读</span></span><br><span class="line">-w &lt;file&gt;	<span class="comment"># 文件是否可写</span></span><br><span class="line">-x &lt;file&gt;	<span class="comment"># 文件是否可执行</span></span><br><span class="line">-s &lt;file&gt;	<span class="comment"># 文件是否为空（文件大小是否大于0）</span></span><br><span class="line">&lt;file1&gt; -nt &lt;file2&gt; <span class="comment"># 文件1是否比文件2新</span></span><br><span class="line">&lt;file1&gt; -ot &lt;file2&gt; <span class="comment"># 文件1是否比文件2老</span></span><br></pre></td></tr></table></figure>
<h4 id="17.3.-%E6%95%B0%E5%80%BC%E6%B5%8B%E8%AF%95">17.3. 数值测试</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;int1&gt; -eq &lt;int2&gt; <span class="comment"># 是否相等</span></span><br><span class="line">&lt;int1&gt; -ne &lt;int2&gt; <span class="comment"># 是否不相等</span></span><br><span class="line">&lt;int1&gt; -gt &lt;int2&gt; <span class="comment"># 是否大于</span></span><br><span class="line">&lt;int1&gt; -lt &lt;int2&gt; <span class="comment"># 是否小于</span></span><br><span class="line">&lt;int1&gt; -ge &lt;int2&gt; <span class="comment"># 是否大于相等</span></span><br><span class="line">&lt;int1&gt; -le &lt;int2&gt; <span class="comment"># 是否小于相等</span></span><br></pre></td></tr></table></figure>
<h4 id="17.4.-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B5%8B%E8%AF%95">17.4. 字符串测试</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-z &lt;string&gt;  <span class="comment"># 是否长度为0</span></span><br><span class="line">-n &lt;string&gt;  <span class="comment"># 是否长度不为0</span></span><br><span class="line">&lt;string1&gt; = &lt;string2&gt;  <span class="comment"># 是否相等</span></span><br><span class="line">&lt;string1&gt; != &lt;string2&gt;  <span class="comment"># 是否不相等</span></span><br><span class="line">&lt;string1&gt; \&gt; &lt;string2&gt;  <span class="comment"># 是否大于</span></span><br><span class="line">&lt;string1&gt; \&lt; &lt;string2&gt;  <span class="comment"># 是否小于</span></span><br></pre></td></tr></table></figure>
<h4 id="17.5.-%26%26%E3%80%81%7C%7C%E3%80%81!">17.5. &amp;&amp;、||、!</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># AND</span></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$var</span>"</span> -a -e <span class="string">"<span class="variable">$var</span>"</span>]; <span class="keyword">then</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$var</span>"</span>] &amp;&amp; [ -e <span class="string">"<span class="variable">$var</span>"</span>]; <span class="keyword">then</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$var</span>"</span> -o -e <span class="string">"<span class="variable">$var</span>"</span>]; <span class="keyword">then</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$var</span>"</span>] || [ -e <span class="string">"<span class="variable">$var</span>"</span>]; <span class="keyword">then</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># NOT</span></span><br><span class="line"><span class="keyword">if</span> [ ! -n <span class="string">"<span class="variable">$var</span>"</span>] || [ ! -e <span class="string">"<span class="variable">$var</span>"</span>]; <span class="keyword">then</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ! [ -n <span class="string">"<span class="variable">$var</span>"</span>] || ! [ -e <span class="string">"<span class="variable">$var</span>"</span>]; <span class="keyword">then</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<h4 id="17.6.-%5B%E3%80%81%5B%5B">17.6. [、[[</h4>
<p><code>[[</code> 比 <code>[</code> 更强大，不同于 <code>[</code>，<code>[[</code> 是一个关键字而不是一个命令。</p>

<p><a href="/2018/08/08/bash/assets/Snipaste_2018-08-11_03-33-51.png" data-fancybox="cju5lrmmq00449wtp5ini4g57" data-caption="Bash">
<img class="border""" src="/2018/08/08/bash/assets/Snipaste_2018-08-11_03-33-51.png">
</a></p>
<h2 id="18.-hints-and-tips">18. Hints and Tips</h2>
<p>批量创建目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir dir_&#123;0,1,2,3,4&#125;.d</span><br></pre></td></tr></table></figure>
<p>只允许输出数字</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> X</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$X</span> | grep <span class="string">"[^0-9]"</span> &gt; /dev/null 2&gt;&amp;1</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"$?"</span> -eq <span class="string">"0"</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"Bad"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"Good"</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="string">"<span class="variable">$X</span>"</span> -eq <span class="string">"10"</span> ]: <span class="keyword">then</span></span><br><span class="line">    &lt;commands&gt;</span><br><span class="line">  <span class="keyword">if</span></span><br><span class="line"><span class="keyword">if</span></span><br></pre></td></tr></table></figure>
<p>输出所有调用变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">while</span> [ <span class="string">"<span class="variable">$#</span>"</span> -gt <span class="string">"0"</span> ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"\$1 is <span class="variable">$1</span>"</span></span><br><span class="line">  <span class="built_in">shift</span></span><br><span class="line"><span class="keyword">done</span>      </span><br></pre></td></tr></table></figure>
<h2 id="19.-%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">19. 参考链接</h2>
<p>· <a href="https://linux.die.net/man/1/bash" target="_blank" rel="noopener">bash(1) - Linux man page</a><br>
· <a href="https://ryanstutorials.net/bash-scripting-tutorial/" target="_blank" rel="noopener">Bash Scripting Tutorial</a><br>
· <a href="https://www.shellscript.sh/" target="_blank" rel="noopener">Shell Scripting Tutorial</a><br>
· <a href="http://mywiki.wooledge.org/BashGuide" target="_blank" rel="noopener">BashGuide</a></p>

        </section>
      </article>

      <div class="clearfix mb-4">
          
          <p>
          <a class="float-left" href="/2018/08/10/electronjs/" tabindex="-1"><i class="fas fa-chevron-left"></i> 使用 Electron 构建跨平台桌面应用</a>
          </p>
          

          
          <p>
          <a class="float-right" href="/2018/08/07/selinux/" tabindex="-1">查看 SELinux 状态及如何关闭 <i class="fas fa-chevron-right"></i></a>
          </p>
          
      </div>

  </div>

  <div class="col-12 col-sm-12 col-md-12 col-lg-3 col-xl-3">

  <!--
    <div class="catalog card border-0 mb-4">
      <div class="card-body p-0">
        <h4>CATALOG</h4>
        <div class="catalog-inn"></div>
      </div>
    </div>
  -->
    
    <div class="card border-0 mb-4">
  <div class="card-body p-0">
    <h4>TAGS</h4>
    <dl class="tags">
    <dd><a href="/tags">All</a></dd>
    
  <dd><a href="/tags/#Diary">Diary</a></dd>

  <dd><a href="/tags/#Hexo">Hexo</a></dd>

  <dd><a href="/tags/#Tree">Tree</a></dd>

  <dd><a href="/tags/#VS Code">VS Code</a></dd>

  <dd><a href="/tags/#Gif">Gif</a></dd>

  <dd><a href="/tags/#Kap">Kap</a></dd>

  <dd><a href="/tags/#Nvm">Nvm</a></dd>

  <dd><a href="/tags/#Linux">Linux</a></dd>

  <dd><a href="/tags/#Shortcuts">Shortcuts</a></dd>

  <dd><a href="/tags/#Systemd">Systemd</a></dd>

  <dd><a href="/tags/#Promise">Promise</a></dd>

  <dd><a href="/tags/#Google">Google</a></dd>

  <dd><a href="/tags/#Pyenv">Pyenv</a></dd>

  <dd><a href="/tags/#VMware">VMware</a></dd>

  <dd><a href="/tags/#SELinux">SELinux</a></dd>

  <dd><a href="/tags/#Memcached">Memcached</a></dd>

  <dd><a href="/tags/#Electron">Electron</a></dd>

  <dd><a href="/tags/#Yii">Yii</a></dd>

  <dd><a href="/tags/#Git">Git</a></dd>

  <dd><a href="/tags/#Shadowsocks">Shadowsocks</a></dd>

  <dd><a href="/tags/#Tips">Tips</a></dd>

  <dd><a href="/tags/#Grunt">Grunt</a></dd>

  <dd><a href="/tags/#Rsync">Rsync</a></dd>

  <dd><a href="/tags/#Markdown">Markdown</a></dd>

  <dd><a href="/tags/#Emoji">Emoji</a></dd>

  <dd><a href="/tags/#Jupyter">Jupyter</a></dd>

  <dd><a href="/tags/#MariaDB">MariaDB</a></dd>

  <dd><a href="/tags/#Ansible">Ansible</a></dd>

  <dd><a href="/tags/#Bash">Bash</a></dd>

    </dl>
  </div>
</div>
    <div class="card border-0 mb-4">
  <div class="card-body p-0">
    <h4>CATEGORIES</h4>
    <dl class="tags">
    <dd><a href="/categories">All</a></dd>
    
  <dd><a href="/categories/#Diary">Diary</a></dd>

  <dd><a href="/categories/#Node.js">Node.js</a></dd>

  <dd><a href="/categories/#Linux">Linux</a></dd>

  <dd><a href="/categories/#VS Code">VS Code</a></dd>

  <dd><a href="/categories/#MacOS">MacOS</a></dd>

  <dd><a href="/categories/#Node.Js">Node.Js</a></dd>

  <dd><a href="/categories/#Javascript">Javascript</a></dd>

  <dd><a href="/categories/#Google">Google</a></dd>

  <dd><a href="/categories/#Python">Python</a></dd>

  <dd><a href="/categories/#VMware">VMware</a></dd>

  <dd><a href="/categories/#CentOS">CentOS</a></dd>

  <dd><a href="/categories/#Php">Php</a></dd>

  <dd><a href="/categories/#Git">Git</a></dd>

  <dd><a href="/categories/#Tips">Tips</a></dd>

  <dd><a href="/categories/#MacOS">MacOS</a></dd>

  <dd><a href="/categories/#Memcached">Memcached</a></dd>

  <dd><a href="/categories/#Yii">Yii</a></dd>

  <dd><a href="/categories/#MariaDB">MariaDB</a></dd>

  <dd><a href="/categories/#Ansible">Ansible</a></dd>

    </dl>
  </div>
</div>
    <div class="card border-0 mb-4">
  <div class="card-body p-0">
    <h4>ARCHIVES</h4>
    <dl class="tags">
    <dd><a href="/archives">All</a></dd>
    


  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



  <dd><a href="/archives/#2015">2015</a></dd>

  <dd><a href="/archives/#2016">2016</a></dd>

  <dd><a href="/archives/#2018">2018</a></dd>

    </dl>
  </div>
</div>
    
  </div>
</div>
</div>

    <footer class="footer">

    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-sm-12 col-md-12 col-lg-10 col-xl-10">

          <div class="text-center">
            <p>
  <a href="https://github.com/garryshield" target="_blank" class="fa-stack fa-1x">
    <i class="fas fa-circle fa-stack-2x"></i>
    <i class="fab fa-github-alt fa-stack-1x fa-inverse"></i>
  </a>
  <a href="https://twitter.com/garry_shield" target="_blank" class="fa-stack fa-1x">
    <i class="fas fa-circle fa-stack-2x"></i>
    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
  </a>
  <a href="https://www.zhihu.com/people/garryshield" target="_blank" class="fa-stack fa-1x">
    <i class="fas fa-circle fa-stack-2x"></i>
    <i class="fa fa-stack-1x fa-inverse">知</i>
  </a>
</p>
            <p class="mb-4"></p>
            <p>Copyright © Garry Shield 2018 </p>
<p>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> and <a href="https://github.com/twbs/bootstrap" target="_blank">Bootstrap</a></p>
          </div>

        </div>
      </div>
    </div>
      
    </footer>

    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Search" />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
    
    <script src="/assets/js/libs.min.js"></script>
    <script src="/assets/js/main.min.js"></script>
  </body>
</html>

language: node_js
node_js: stable
cache:
  directories:
    - node_modules
install:
  - npm install
script:
  - hexo generate
after_success:
  - cd public
  - git init
  - git config user.name "${USER_NAME}"
  - git config user.email "${USER_EMAIL}"
  - git add .
  - git commit -m 'update site'
  - git push --force --quiet "https://${GH_TOKEN}@${GH_REF}" master:master
branchs:
  only:
    - dev
env:
  global:
    - USER_NAME="garryshield"
    - USER_EMAIL="749291704@qq.com"
    - REPO="garryshield.github.io"
    - GH_REF="github.com/${USER_NAME}/${REPO}.git"
    - secure: MC3cR4MByptkCcETAsySVB7LA68vG7A6CmsaWGLSDMJdKT8mSmqQJ+6yi4Fn12fhkheLC9LA96bs4+rBWuaN7bv2D9YG3QDJqKMV6sJa2DWaX3sHS7HJDE719zqKlkh+xmcg7JEdseSlz8EtMZxPq/wHF2UUD0zP4TIfZCGTSQ7gPoSkI7UTOsVpyLPWt/EFYxziIEESnGM5STSVYu1DxgXCqLPVqkcWsve1KXu2RJalyMmrKqUO/6Z4b0Neyq05bfMh3EfCOXAhfE0sbzwSjXJh5RmMnmFNtqsZ10wWu/8DbvFtgZY+Q5rQA/pIiXM31Or80BfIC5pT0/8YhRnmcHoquKhvwKhu3H2ws7Ap1ftFpZTY8GDp/9iMpNhJCGEgt925F3bw/I55QmqETWyL24gD/kNe2hbZhchdUeLBx0JTtk0TZlLXeWyos+YP5929NwsGl/EfNCRcUo/B9auKuJjyRZi6pQWn1oaOTmSBmNwoW1jJj1FHea64nC6gCyV17lhSgSl86LndhU68pko0wkD/mQ6XAFhg6l0H5AP4rLSUgV8PWaWI1IyDq20uAvaPCzgfPVlYbCJKpFRAksDW/PnWaHwjhxXzGiny5Rv722Dn57HnsHkkcbyV0Y+mocu9KK8T6j89P1PXWaSd8uR6Jr4zoGDq+yxI2D1+wdmHDhY=

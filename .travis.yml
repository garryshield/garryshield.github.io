language: node_js
node_js: stable
cache:
  directories:
  - node_modules
install:
- npm install
script:
- hexo generate
after_success:
- cd public
- git init
- git config user.name "${USER_NAME}"
- git config user.email "${USER_EMAIL}"
- git add .
- git commit -m 'update site'
- git push --force --quiet "https://${GH_TOKEN}@${GH_REF}" master:master
branchs:
  only:
  - dev
env:
  global:
  - USER_NAME="garryshield"
  - USER_EMAIL="749291704@qq.com"
  - REPO="garryshield.github.io"
  - GH_REF="github.com/${USER_NAME}/${REPO}.git"
  - secure: C9VjGGlCjIyu6iayEAwvTZf3ks6+UXsjRJlbW7klNT1frB/eggp/oN+Luko9+9rzVi8m4s48KBGrcMKqihWYn60HX9xpRjiL85NidWgokBugSGVeZfp4ZznpYEdepq+4RkNRGXsFn2ffy2EQCzgwdmYm3KSPKqFb5IVEZra02oC6CioZpXlqS37k3US31X+nc9N98+29lPSSl74+y+dkDc8zRdqZiMvg5FoRb3KuPEPSedgIMHPZSMCKM67KSc05fjiIX30WsvN3mUc0aCuk3l8fiDdlohvH245TfgKWCWApY5jvasgetAwIQDc2cr4yCne7oyoL+/ZgT4mN1CElM4qjPrjKbGXh0TIE1MtpvtcnLFQkpNKaaFQR8xPZPJDlp2gdbCCqBXBYKXGCrOC0wpBlPUWZwXqo02mBnLCzvAnpiGw8h+2HsQyEWdAfyBCVKSLBwODc9WJgMs8zGIi70nf99p8kkWVqydDqCxhl5IAQDcybw1/CgkAnnVvJTrSoiblob4e/e8ozmKmEr15tn3nG+FzliI6TyYqjsjSCAlg/Hj53HHjDJevimCIJf+DlCrAyRyELS5/EyjQtwabjV8OoMW/D2IFn93m7ti4iRp4seMM5WfZ/jg5ToBiiq3hs1naG2dbwBGGTmwDKJaQuIgFK9Rz6eoXvVR/1l3HoIfk=

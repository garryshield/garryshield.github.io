language: node_js
node_js: stable
cache:
  directories:
  - node_modules
install:
- npm install
script:
- hexo generate
after_success:
- cd public
- git init
- git config user.name "${USER_NAME}"
- git config user.email "${USER_EMAIL}"
- git add .
- git commit -m 'update site'
- git push --force --quiet "https://${GH_TOKEN}@${GH_REF}" master:master
branchs:
  only:
  - dev
env:
  global:
  - USER_NAME="garryshield"
  - USER_EMAIL="749291704@qq.com"
  - REPO="garryshield.github.io"
  - GH_REF="github.com/${USER_NAME}/${REPO}.git"
  - secure: Ou0H3AA2fnv4xMP9rXsim+Ww4ambHXWfKL5BzVzYAoOzoSjsQvMWizKAwmsV146P69LcI0SNuxsJRf96pujjC9OfJlkbAkjhf5MW8n74TJX/mimUMbCYGVlB4k9qlENV2i/cG4JsX21fFVuzJLdeK/D7gPSimGcvK8dfNhB2zjUFQwgJNDrXvLVz+05CzgBrayzoW2ZOTDrak9bzK7iLBzuMIJK/9HRkVay7ybT3oEgxcvJA4/xmuGbG6ziJizwodUS6S7QKDPYtXkqq9i15aNsqw9tFsOxwq3lbtC8qiXSd5krP3PCalcEs3AKqwfSOkGxsYoEo+Y72r5fLQlxC26m0XDK2e9u2O6cLQcC/Ic7WwEXhkkTfaozrQaMZ3PWXg0Pm/gAT7stvVE3yzqmfDPsUJrNd25mfHaatnc3WRhMApZMlnDbYMiVe4LNCTHU5uFkOsmSBVykqbRZGOEcVg5IACNaH6R05kSyBO8Qzp/iZF0UE7aim1BpY6/+FVQOrMFDG4gSKFn9oIKXReg7nfm19lx2+u2Hbi6CG+y1G49c67FaRf0LAszcz7u5Kk620/cFyEz4psqzff2/Ts1G0M5S/u5374lBvLvE8scOwVmF2OJIB7vL6dPK3eXRVvxHkzPY3oaJQu6UzXjWibTfM5CACnWJpCCVSH6rJw21zW4Q=

language: node_js
node_js: stable
cache:
  directories:
    - node_modules
install:
  - npm install
script:
  - hexo generate
after_success:
  - cd public
  - git init
  - git config user.name "${USER_NAME}"
  - git config user.email "${USER_EMAIL}"
  - git add .
  - git commit -m 'update site'
  - git push --force --quiet "https://${GH_TOKEN}@${GH_REF}" master:gh-pages
branchs:
  only:
    - master
env:
  global:
    - USER_NAME="garryshield"
    - USER_EMAIL="749291704@qq.com"
    - REPO="garryshield.github.io"
    - GH_REF="github.com/${USER_NAME}/${REPO}.git"
    - secure: pVlTmuVFepMGRlNb6EzP0aDKH+Pu607SZy08PC2fPngMNn3YQWmJsuas8FZk+X6hnt4P9CbOlMUdep5vbezKJWKV2x/gdfsMFLdc6Tv/kF+CQ6FXO+dV8XLkznzQ+ZIW6LhL3rZKpmTdYbZO5reUdLdnBPSq1VEmHGhw9FEtepgHC5VMLCSUPq4YgZhZPOXhzq3hb85euflOqorfoRKR/eyqpdqRuG1xjqVM6bwD7MqVqXb4KWbJ79hFYg7Vc90z4WfyowDVh7P4ikt6C8IGb5qQigIb/xI2jBi7K7pP+0YVo/WAxkBGzVWEUOvI7RNb1q1o7YZ4doERZUvMRwS0YnKTA2Nbgw5ZUZQdVP7dUMapHpxURGw9WaS1akaQefjAfPFULAsJbdZ38nXPp4BBXpJVpm9n+SHowLa2a3kRtmLCXlCE76CF7vFtZQpa0a14mlqgP84rG2kcZSw7hRZ+SuiY7jEnsQGITmuoKRjY0DT6qatvhMf1naj3XOn19V3MsoHLVU7HLNWIruuwe9JGwduQm2A/iEu9mGA83hdYgy/v69KFApfb0aeFU4FmJBgiURLMbgVkTiVe02yKp2rLHdFzKS0eXmSrYOmIldLE36Tnu1Q6s56rbxGIcUccNGsGHbNZuzck06zhBjXy9VM3PdCiAx8SdZoIVjy/Fx1kUyE=

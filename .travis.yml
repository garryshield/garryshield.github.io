language: node_js
node_js: stable
cache:
  directories:
  - node_modules
install:
- npm install
script:
- hexo generate
after_success:
- cd public
- git init
- git config user.name "${USER_NAME}"
- git config user.email "${USER_EMAIL}"
- git add .
- git commit -m 'update site'
- git push --force --quiet "https://${GH_TOKEN}@${GH_REF}" master:master
branchs:
  only:
  - dev
env:
  global:
  - USER_NAME="garryshield"
  - USER_EMAIL="749291704@qq.com"
  - REPO="garryshield.github.io"
  - GH_REF="github.com/${USER_NAME}/${REPO}.git"
  - secure: O+7nCF2lWteMEuEslspgxuHM/BIY4JVaJEK4/IYuD93wD1JzFyKIFQ2x5zUx81WqBucTmE+Z7QdtYcNES+tD6CvkIO4+WD2IrErIguO+BEHtzZn+zdQpO8FCUEx08fl3iWww3yf4gpT/w6vQt/ummSurliczv9ZK99VZnFLuJ2O0I9zSght+q/GmWbYC2f1lB/UDyXLRUPcrrCUa0nx5ch5rwx5keTR9OWJq9H7q/9ewyVjTlvwcyjXD/p0OqP5iGMrf18k4QKNYwEV1ZTV+VNw+qx87JRp1JtLomMTZBrk/O0V67YzybgIevuASxOZfR7Ih58t1eNpAOV+0EQvAx6qRwNSHcFpoon8ha9n8GU4c8FSPB6gBQ+qFXyHTsZp4pI08p5VSrMjliF8i1m3CPntTANVXVYBgMiEW4ylLZE8xoOq4Xq6MlKk3E9vNU5MHs1JhDVZqDhfy9h0QGdry0UfQ1Dwb2svAvoO1ABGS7OkiXy02OUAs373Wcb5E8WMDSp7V+QsFVIEDdesNftSZPzz54+EmaqZgDvQrVO8cKst4ftBYVVnKW0CJ4t1sg3ImYZ8nqB55J0fuJTNlvcuOe0Do59YVlFFUUICUSsMGtP7NqB5lFU0hH8mISHQ312dRTXubVrPMR4bU7VKX5WSI8L+VY3aeiYWvwj5Ot/ywYO0=
